(()=>{var e={};e.id=800,e.ids=[800],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6556:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>c,routeModule:()=>p,tree:()=>l}),t(3122),t(6765),t(996);var r=t(170),s=t(5002),i=t(3876),n=t.n(i),o=t(6299),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(a,d);let l=["",{children:["dashboard",{children:["kota",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3122)),"C:\\Users\\kayli\\OneDrive\\Documents\\09\\propen\\siap-fe\\my-app\\src\\app\\dashboard\\kota\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,6765)),"C:\\Users\\kayli\\OneDrive\\Documents\\09\\propen\\siap-fe\\my-app\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\kayli\\OneDrive\\Documents\\09\\propen\\siap-fe\\my-app\\src\\app\\dashboard\\kota\\page.js"],h="/dashboard/kota/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/kota/page",pathname:"/dashboard/kota",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2471:(e,a,t)=>{Promise.resolve().then(t.bind(t,608))},608:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(7247),s=t(8964),i=t.n(s),n=t(4178),o=t(2869),d=t.n(o);t(9906);let l=()=>{let e=(0,n.useRouter)(),[a,t]=(0,s.useState)(0),[o,l]=(0,s.useState)(1),[c,h]=(0,s.useState)(""),[u,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{let a=localStorage.getItem("authToken");if(!a){e.push("/login");return}try{let t=await fetch("https://siap-be-production.up.railway.app/api/accounts/check_role_dashboard/",{headers:{Authorization:`Token ${a}`}}),r=await t.json();(r.error||!["Administrasi","Eksekutif","Logistik"].includes(r.role))&&e.push("/login")}catch(a){console.error("Failed to verify role:",a),e.push("/login")}})()},[e]);let m=e=>new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),_=a=>{let t=`/tracker-survei/${a}`;e.push(t)},x=a=>{let t=`/survei/${a}`;e.push(t)},b=a=>{let t=a.target.value;h(t),e.push({nasional:"/dashboard/nasional",provinsi:"/dashboard/provinsi",kota:"/dashboard/kota",keseluruhan:"/dashboard"}[t])};return(0,s.useEffect)(()=>{h("kota"),async function(){try{let e=await fetch("https://siap-be-production.up.railway.app/api/dashboard/survei/kota/",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Network response was not ok");let a=await e.json();p(a),console.log(a)}catch(e){console.error("Failed to fetch data:",e)}}()},[o]),r.jsx("div",{className:d().containerBackground,children:r.jsx("div",{className:d().container,children:(0,r.jsxs)("div",{className:d().content,children:[r.jsx("h1",{className:d().title,children:"Dashboard Progres Survei"}),(0,r.jsxs)("div",{className:d().surveyTypeSection,children:[r.jsx("label",{className:d().label,children:"Pilih Jenis Survei"}),r.jsx("div",{className:d().radioGroup,children:["keseluruhan","nasional","provinsi","kota"].map(e=>(0,r.jsxs)(i().Fragment,{children:[r.jsx("input",{type:"radio",id:e,name:"surveyType",value:e,checked:c===e,onChange:b}),(0,r.jsxs)("label",{htmlFor:e,children:["Survei ",e]})]},e))})]}),r.jsx("div",{className:d().tableContainer,children:(0,r.jsxs)("table",{className:d().table,children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Nama Klien"}),r.jsx("th",{children:"Judul Survei"}),r.jsx("th",{children:"Tanggal Mulai"}),r.jsx("th",{children:"Tanggal Berakhir"}),r.jsx("th",{children:"Wilayah"}),r.jsx("th",{children:"Jumlah Responden"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:u.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[r.jsx("img",{src:"/images/Profile.svg",alt:"User Icon",className:d().icon})," ",e.nama_klien]}),r.jsx("td",{children:e.nama_survei}),r.jsx("td",{children:e.waktu_mulai_survei&&m(e.waktu_mulai_survei)}),r.jsx("td",{children:e.waktu_berakhir_survei&&m(e.waktu_berakhir_survei)}),r.jsx("td",{children:e.wilayah_survei}),r.jsx("td",{children:e.jumlah_responden}),r.jsx("td",{children:e.last_status}),(0,r.jsxs)("td",{className:d().actions,children:[r.jsx("button",{className:d().actionButton,onClick:()=>x(e.id),children:"Lihat Detail Survei"}),r.jsx("button",{className:d().actionButton,onClick:()=>_(e.id),children:"Lihat Tracker Survei"})]})]},e.id))})]})})]})})})}},2869:e=>{e.exports={containerBackground:"dashboard_containerBackground___FMAG",container:"dashboard_container__UvVTH",content:"dashboard_content__SfbXD",title:"dashboard_title__S4EtT",label:"dashboard_label__SgCdD",diagramPlaceholder:"dashboard_diagramPlaceholder__183tN",chartContainer:"dashboard_chartContainer__c4zUU",tableContainer:"dashboard_tableContainer__ZnNcP",table:"dashboard_table__Tg8SY",badge:"dashboard_badge__nmimx",iconContainer:"dashboard_iconContainer__BgqBP",radioGroup:"dashboard_radioGroup__dMK_9",actionButton:"dashboard_actionButton__Zrwfx"}},3122:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(5347).createProxy)(String.raw`C:\Users\kayli\OneDrive\Documents\09\propen\siap-fe\my-app\src\app\dashboard\kota\page.js#default`)},3881:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});var r=t(4564);let s=e=>[{type:"image/x-icon",sizes:"29x32",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[379,354,564,384],()=>t(6556));module.exports=r})();