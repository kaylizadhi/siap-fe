(()=>{var e={};e.id=287,e.ids=[287],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},8252:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(4135),r(6765),r(996);var t=r(170),s=r(5002),n=r(3876),i=r.n(n),o=r(6299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(a,l);let d=["",{children:["dashboard",{children:["nasional",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4135)),"C:\\Users\\kayli\\OneDrive\\Documents\\09\\propen\\siap-fe\\my-app\\src\\app\\dashboard\\nasional\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6765)),"C:\\Users\\kayli\\OneDrive\\Documents\\09\\propen\\siap-fe\\my-app\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\kayli\\OneDrive\\Documents\\09\\propen\\siap-fe\\my-app\\src\\app\\dashboard\\nasional\\page.js"],h="/dashboard/nasional/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/nasional/page",pathname:"/dashboard/nasional",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4073:(e,a,r)=>{Promise.resolve().then(r.bind(r,8923))},8923:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var t=r(7247),s=r(8964),n=r.n(s),i=r(4178),o=r(2869),l=r.n(o);r(9906);let d=()=>{let e=(0,i.useRouter)(),[a,r]=(0,s.useState)(0),[o,d]=(0,s.useState)(1),[c,h]=(0,s.useState)(""),[u,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{let a=localStorage.getItem("authToken");if(!a){e.push("/login");return}try{let r=await fetch("https://siap-be-production.up.railway.app/api/accounts/check_role_dashboard/",{headers:{Authorization:`Token ${a}`}}),t=await r.json();(t.error||!["Administrasi","Eksekutif","Logistik"].includes(t.role))&&e.push("/login")}catch(a){console.error("Failed to verify role:",a),e.push("/login")}})()},[e]);let m=e=>new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),_=a=>{let r=`/tracker-survei/${a}`;e.push(r)},x=a=>{let r=`/survei/${a}`;e.push(r)},b=a=>{let r=a.target.value;h(r),e.push({nasional:"/dashboard/nasional",provinsi:"/dashboard/provinsi",kota:"/dashboard/kota",keseluruhan:"/dashboard"}[r])};return(0,s.useEffect)(()=>{h("nasional"),async function(){try{let e=await fetch("https://siap-be-production.up.railway.app/api/dashboard/survei/nasional/",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Network response was not ok");let a=await e.json();p(a),console.log(a)}catch(e){console.error("Failed to fetch data:",e)}}()},[o]),t.jsx("div",{className:l().containerBackground,children:t.jsx("div",{className:l().container,children:(0,t.jsxs)("div",{className:l().content,children:[t.jsx("h1",{className:l().title,children:"Dashboard Progres Survei"}),(0,t.jsxs)("div",{className:l().surveyTypeSection,children:[t.jsx("label",{className:l().label,children:"Pilih Jenis Survei"}),t.jsx("div",{className:l().radioGroup,children:["keseluruhan","nasional","provinsi","kota"].map(e=>(0,t.jsxs)(n().Fragment,{children:[t.jsx("input",{type:"radio",id:e,name:"surveyType",value:e,checked:c===e,onChange:b}),(0,t.jsxs)("label",{htmlFor:e,children:["Survei ",e]})]},e))})]}),t.jsx("div",{className:l().tableContainer,children:(0,t.jsxs)("table",{className:l().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Nama Klien"}),t.jsx("th",{children:"Judul Survei"}),t.jsx("th",{children:"Tanggal Mulai"}),t.jsx("th",{children:"Tanggal Berakhir"}),t.jsx("th",{children:"Wilayah"}),t.jsx("th",{children:"Jumlah Responden"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Action"})]})}),t.jsx("tbody",{children:u.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{children:[t.jsx("img",{src:"/images/Profile.svg",alt:"User Icon",className:l().icon})," ",e.nama_klien]}),t.jsx("td",{children:e.nama_survei}),t.jsx("td",{children:e.waktu_mulai_survei&&m(e.waktu_mulai_survei)}),t.jsx("td",{children:e.waktu_berakhir_survei&&m(e.waktu_berakhir_survei)}),t.jsx("td",{children:e.wilayah_survei}),t.jsx("td",{children:e.jumlah_responden}),t.jsx("td",{children:e.last_status}),(0,t.jsxs)("td",{className:l().actions,children:[t.jsx("button",{className:l().actionButton,onClick:()=>x(e.id),children:"Lihat Detail Survei"}),t.jsx("button",{className:l().actionButton,onClick:()=>_(e.id),children:"Lihat Tracker Survei"})]})]},e.id))})]})})]})})})}},2869:e=>{e.exports={containerBackground:"dashboard_containerBackground___FMAG",container:"dashboard_container__UvVTH",content:"dashboard_content__SfbXD",title:"dashboard_title__S4EtT",label:"dashboard_label__SgCdD",diagramPlaceholder:"dashboard_diagramPlaceholder__183tN",chartContainer:"dashboard_chartContainer__c4zUU",tableContainer:"dashboard_tableContainer__ZnNcP",table:"dashboard_table__Tg8SY",badge:"dashboard_badge__nmimx",iconContainer:"dashboard_iconContainer__BgqBP",radioGroup:"dashboard_radioGroup__dMK_9",actionButton:"dashboard_actionButton__Zrwfx"}},4135:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(5347).createProxy)(String.raw`C:\Users\kayli\OneDrive\Documents\09\propen\siap-fe\my-app\src\app\dashboard\nasional\page.js#default`)},3881:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});var t=r(4564);let s=e=>[{type:"image/x-icon",sizes:"29x32",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[379,354,564,384],()=>r(8252));module.exports=t})();