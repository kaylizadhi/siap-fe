(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9781],{5743:function(e,t,s){Promise.resolve().then(s.bind(s,2884))},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},2884:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(7437),o=s(2265),a=s(9376),n=s(9882),u=s.n(n);function i(){let e=(0,a.useRouter)(),[t,s]=(0,o.useState)(""),[n,i]=(0,o.useState)(""),[c,d]=(0,o.useState)(""),[p,l]=(0,o.useState)(""),[h,f]=(0,o.useState)(1),[w,_]=(0,o.useState)(""),g=async()=>{try{let e=await fetch("".concat("https://siap-be-production.up.railway.app/api/","get-security-question/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t})}),s=await e.json();e.ok?(i(s.security_question),f(2)):_(s.error||"User not found")}catch(e){_("Unable to fetch security question")}},y=async()=>{try{let s=await fetch("".concat("https://siap-be-production.up.railway.app/api/","verify-security-answer/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,security_answer:c,new_password:p})});if(!s.ok){let e=await s.json();_(e.error||"Incorrect security answer");return}alert("Password reset successful!"),e.push("/login")}catch(e){_("Failed to reset password")}};return(0,r.jsx)("div",{className:u().forgotPasswordBody,children:(0,r.jsxs)("div",{className:u().forgotPasswordContainer,children:[(0,r.jsx)("h2",{className:u().heading,children:"Forgot Password"}),1===h&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Username"}),(0,r.jsx)("input",{type:"text",className:u().Input,placeholder:"Masukkan username",value:t,onChange:e=>s(e.target.value),required:!0}),(0,r.jsx)("button",{onClick:g,className:u().Button,children:"Get Security Question"})]}),2===h&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Answer Security Question"}),(0,r.jsx)("p",{children:n}),(0,r.jsx)("input",{type:"text",className:u().Input,placeholder:"Masukkan jawaban",value:c,onChange:e=>d(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",className:u().Input,placeholder:"Masukkan password baru",value:p,onChange:e=>l(e.target.value),required:!0}),(0,r.jsx)("button",{onClick:y,className:u().Button,children:"Reset Password"})]}),w&&(0,r.jsx)("p",{className:u().error,children:w}),(0,r.jsx)("footer",{className:u().footer,children:(0,r.jsx)("p",{children:"@2024 optimasys | Contact optimasys.work@gmail.com"})})]})})}},9882:function(e){e.exports={forgotPasswordBody:"forgot-password_forgotPasswordBody__qdukc",forgotPasswordContainer:"forgot-password_forgotPasswordContainer__mB6Bp",heading:"forgot-password_heading__gz3bP",Button:"forgot-password_Button__q0ts2",Input:"forgot-password_Input__n29E1",error:"forgot-password_error__7zIr7",footer:"forgot-password_footer__17W3d"}}},function(e){e.O(0,[7099,2971,2117,1744],function(){return e(e.s=5743)}),_N_E=e.O()}]);