(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3923],{5067:function(e,t,a){Promise.resolve().then(a.bind(a,6612))},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:c?24*Number(i)/Number(s):i,className:n("lucide",o),...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:c,...o}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return a.displayName="".concat(e),a}},2208:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6612:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(7437),s=a(8027),n=a.n(s),l=a(2265),i=a(9376),c=a(7409),o=a(3247),d=a(2208),u=a(9205);let h=(0,u.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),x=(0,u.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var m=a(4663);function p(){let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)(!0),[u,p]=(0,l.useState)(null),[y,f]=(0,l.useState)(""),[g,b]=(0,l.useState)(null),[j,v]=(0,l.useState)(!1),[k,N]=(0,l.useState)(1),[w,_]=(0,l.useState)(1),[C,E]=(0,l.useState)(0),[S]=(0,l.useState)(10),Z=(0,i.useRouter)(),A=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{s(!0);let r="".concat("https://siap-be-production.up.railway.app/api/","klien/?page=").concat(e,"&page_size=").concat(S);a&&(r+="&search=".concat(encodeURIComponent(a)));let n=await fetch(r);if(!n.ok)throw Error("Failed to fetch data");let l=await n.json();t(l.results),_(l.total_pages),N(l.current_page),E(l.total_items)}catch(e){p(e.message),c.Am.error("Failed to fetch clients")}finally{s(!1)}};(0,l.useEffect)(()=>{A()},[]);let z=e=>{e>=1&&e<=w&&(N(e),A(e,y))};(0,l.useEffect)(()=>{let e=setTimeout(()=>{N(1),A(1,y)},300);return()=>clearTimeout(e)},[y]);let T=e=>{Z.push("/list-klien/detail-klien/".concat(e))},D=e=>{Z.push("/list-klien/update/".concat(e))},F=async()=>{if(g)try{if((await fetch("".concat("https://siap-be-production.up.railway.app/api/","klien/").concat(g.id,"/delete/"),{method:"DELETE"})).ok)A(k,y),v(!1),b(null),c.Am.success("Klien berhasil dihapus!");else throw Error("Failed to delete client")}catch(e){console.error("Error deleting client:",e),c.Am.error("Gagal menghapus klien.")}};return a&&!e.length?(0,r.jsx)("div",{className:"".concat(n().className," flex justify-center items-center min-h-screen"),children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-900"})}):u?(0,r.jsx)("div",{className:"".concat(n().className," flex justify-center items-center min-h-screen"),children:(0,r.jsxs)("div",{className:"text-red-500",children:["Error: ",u]})}):(0,r.jsxs)("div",{className:"".concat(n().className," p-6"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-primary-900",children:"Daftar Klien"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-2",children:["Total ",C," klien ",y&&"ditemukan"]})]}),(0,r.jsxs)(m.Z,{onClick:()=>{Z.push("/list-klien/tambah")},variant:"primary",className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-3xl mr-2",children:"+"}),(0,r.jsx)("span",{className:"text-sm",children:"Tambah Klien"})]})]}),(0,r.jsxs)("div",{className:"relative w-full mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none",children:(0,r.jsx)(o.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Cari berdasarkan nama klien, perusahaan, atau daerah...",className:"w-full pl-14 pr-6 py-3 rounded-full border-2 border-gray-200 outline-none bg-transparent text-gray-600 text-sm ".concat(n().className," focus:border-primary-900 transition-colors"),value:y,onChange:e=>f(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-8 py-3 text-xs text-gray-500 uppercase font-medium bg-gray-50 rounded-t-lg",children:[(0,r.jsx)("div",{children:"Nama Klien"}),(0,r.jsx)("div",{children:"Nama Perusahaan"}),(0,r.jsx)("div",{children:"Daerah"}),(0,r.jsx)("div",{className:"text-center",children:"Action"})]}),(0,r.jsx)("div",{className:"space-y-3",children:0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:y?"Tidak ada klien yang ditemukan":"Belum ada klien yang ditambahkan"}):e.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-8 py-3 bg-white rounded-lg border border-gray-200 hover:border-gray-300 hover:shadow-sm transition-all duration-200",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"font-bold text-gray-700",children:e.nama_klien})}),(0,r.jsx)("div",{className:"text-gray-500",children:e.nama_perusahaan}),(0,r.jsx)("div",{className:"text-gray-500",children:e.daerah}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>T(e.id),className:"p-2 text-primary-700 hover:bg-primary-50 rounded-full transition-colors",title:"View Details",children:(0,r.jsx)(d.Z,{size:18})}),(0,r.jsx)("button",{onClick:()=>D(e.id),className:"p-2 text-amber-600 hover:bg-amber-50 rounded-full transition-colors",title:"Edit",children:(0,r.jsx)(h,{size:18})}),(0,r.jsx)("button",{onClick:()=>{b(e),v(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete",children:(0,r.jsx)(x,{size:18})})]})]},e.id))}),w>1&&(0,r.jsxs)("div",{className:"mt-6 flex justify-end items-center space-x-8 px-8",children:[(0,r.jsxs)("button",{onClick:()=>z(k-1),disabled:1===k,className:"flex items-center space-x-1 ".concat(1===k?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:text-gray-500"),children:[(0,r.jsx)("span",{children:"<"}),(0,r.jsx)("span",{children:"Sebelumnya"})]}),(0,r.jsxs)("button",{onClick:()=>z(k+1),disabled:k===w,className:"flex items-center space-x-1 ".concat(k===w?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:text-gray-500"),children:[(0,r.jsx)("span",{children:"Selanjutnya"}),(0,r.jsx)("span",{children:">"})]})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-lg max-w-sm w-full mx-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Konfirmasi Hapus"}),(0,r.jsxs)("p",{className:"mb-6 text-gray-600",children:['Apakah Anda yakin ingin menghapus klien "',null==g?void 0:g.nama_klien,'"?']}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(m.Z,{onClick:()=>{v(!1),b(null)},variant:"secondary",className:"px-4 py-2",children:"Batal"}),(0,r.jsx)(m.Z,{onClick:F,variant:"danger",className:"px-4 py-2",children:"Hapus"})]})]})})]})}},4663:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>{let{onClick:t,children:a,type:s="button",variant:n="default",className:l="",...i}=e;return(0,r.jsx)("button",{onClick:t,type:s,className:"".concat("px-4 py-2 rounded-full transition-colors"," ").concat({default:"bg-gray-200 text-black hover:bg-gray-300",primary:"bg-[#a62626] text-white hover:bg-[#a62828]",secondary:"bg-white border border-[#a62626] text-[#a62626] hover:bg-[#f2f2f2]",modalCancel:"px-6 py-2 text-gray-600 hover:text-gray-800 rounded-full border border-gray-300 hover:border-gray-400 transition-colors",modalDelete:"px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors"}[n]," ").concat(l),...i,children:a})}},8027:function(e){e.exports={style:{fontFamily:"'__Caudex_ebaa45', '__Caudex_Fallback_ebaa45'",fontWeight:700,fontStyle:"normal"},className:"__className_ebaa45"}}},function(e){e.O(0,[2915,8304,2971,2117,1744],function(){return e(e.s=5067)}),_N_E=e.O()}]);