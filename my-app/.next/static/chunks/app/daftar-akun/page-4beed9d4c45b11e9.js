(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3005],{2546:function(a,e,t){Promise.resolve().then(t.bind(t,6786))},9376:function(a,e,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(e,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(e,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(e,{useRouter:function(){return n.useRouter}})},6786:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return o}});var n=t(7437),r=t(2265),s=t(9376),c=t(8050),i=t.n(c);function o(){let a=(0,s.useRouter)(),[e,t]=(0,r.useState)(""),[c,o]=(0,r.useState)(1),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(null),[_,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let t=async()=>{let e=localStorage.getItem("authToken");if(!e){a.push("/login");return}try{let t=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_admin/"),{headers:{Authorization:"Token ".concat(e)}}),n=await t.json();(n.error||"Admin Sistem"!==n.role)&&a.push("/login")}catch(e){console.error("Failed to verify role:",e),a.push("/login")}};(async()=>{try{let a=e?"".concat("https://siap-be-production.up.railway.app/api/","daftarAkun/api/searchAkun/?q=").concat(encodeURIComponent(e)):"".concat("https://siap-be-production.up.railway.app/api/","daftarAkun/api/daftarAkun/"),t=await fetch(a),n=await t.json();console.log("Fetched accounts:",n),u(n)}catch(a){console.error("Error fetching accounts:",a)}})(),t()},[e],[a]);let k=a=>{p(a),f(!0)},x=l.filter(a=>a.username.toLowerCase().includes(e.toLowerCase())||"".concat(a.first_name," ").concat(a.last_name).toLowerCase().includes(e.toLowerCase())),j=10*c,g=j-10,y=x.slice(g,j),b=Math.ceil(x.length/10),w=async(a,e)=>{let t=a+g;h(t);try{await fetch("".concat("https://siap-be-production.up.railway.app/api/","daftarAkun/").concat(e,"/delete/"),{method:"DELETE"}),f(!1),console.log("account deleted");let a=l.filter((a,e)=>e!==t);u(a)}catch(a){console.error("Error deleting account:",a)}finally{h(null)}};return(0,n.jsxs)("div",{className:i().mainContainer,children:[(0,n.jsxs)("div",{className:i().container,children:[(0,n.jsx)("h1",{className:"text-4xl font-weight-700 text-primary-900",children:"Daftar Akun"}),(0,n.jsx)("div",{className:"w-full flex px-6 py-3 mb-6 rounded-full border-2 border overflow-hidden mx-auto",children:(0,n.jsx)("input",{type:"text",placeholder:"Cari akun...",value:e,onChange:a=>{t(a.target.value),o(1)},className:"w-full outline-none bg-transparent text-gray-600 text-sm"})}),(0,n.jsxs)("table",{className:i().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:i().header,children:[(0,n.jsx)("th",{children:"Username"}),(0,n.jsx)("th",{children:"Nama"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Role"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:y.map((a,e)=>(0,n.jsxs)("tr",{className:e+g===d?i().fadeOut:"",children:[(0,n.jsxs)("td",{children:[(0,n.jsx)("img",{src:"/images/Profile.svg",alt:"User Icon",className:i().icon})," ",a.username]}),(0,n.jsxs)("td",{children:[a.first_name," ",a.last_name]}),(0,n.jsx)("td",{children:a.email}),(0,n.jsx)("td",{children:a.role}),(0,n.jsx)("td",{className:i().actions,children:(0,n.jsx)("button",{className:i().deleteButton,onClick:()=>k(e),children:(0,n.jsx)("img",{src:"/images/Delete.svg",alt:"Delete"})})})]},a.id))})]}),(0,n.jsxs)("div",{className:i().pagination,children:[c>1&&(0,n.jsx)("button",{onClick:()=>o(c-1),children:"< Kembali"}),c<b&&(0,n.jsx)("button",{onClick:()=>o(c+1),children:"Selanjutnya >"})]})]}),_&&(0,n.jsx)("div",{className:i().modalOverlay,children:(0,n.jsxs)("div",{className:i().modal,children:[(0,n.jsx)("p",{children:"Apakah Anda yakin ingin menghapus akun ini?"}),(0,n.jsx)("button",{onClick:()=>w(m,l[m].id),className:i().confirmButton,children:"Ya"}),(0,n.jsx)("button",{onClick:()=>f(!1),className:i().cancelButton,children:"Tidak"})]})})]})}},8050:function(a){a.exports={container:"daftar-akun_container__iaKqH",title:"daftar-akun_title__iKtRm",searchContainer:"daftar-akun_searchContainer__mWGaO",searchIcon:"daftar-akun_searchIcon__uqL26",searchInput:"daftar-akun_searchInput__dqKSY",modalOverlay:"daftar-akun_modalOverlay___C6py",modal:"daftar-akun_modal__SHpIh",confirmButton:"daftar-akun_confirmButton__MIcBF",cancelButton:"daftar-akun_cancelButton__c71iu",table:"daftar-akun_table__K5GiN",header:"daftar-akun_header__NzIwB",icon:"daftar-akun_icon__0MARW",actions:"daftar-akun_actions__8ky03",pagination:"daftar-akun_pagination__wOKyB",deleteButton:"daftar-akun_deleteButton__gR8qw",fadeOut:"daftar-akun_fadeOut__Fi38_",fadeOutSlideUp:"daftar-akun_fadeOutSlideUp__EyvyF"}}},function(a){a.O(0,[5852,2971,2117,1744],function(){return a(a.s=2546)}),_N_E=a.O()}]);