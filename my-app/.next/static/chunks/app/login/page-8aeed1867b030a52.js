(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{9221:function(e,s,n){Promise.resolve().then(n.bind(n,9295))},9376:function(e,s,n){"use strict";var o=n(5475);n.o(o,"useParams")&&n.d(s,{useParams:function(){return o.useParams}}),n.o(o,"usePathname")&&n.d(s,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(s,{useRouter:function(){return o.useRouter}})},9295:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l}});var o=n(7437),a=n(2265),t=n(9376),r=n(4285),i=n.n(r);function l(){let[e,s]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[g,d]=(0,a.useState)(null),[_,h]=(0,a.useState)(!1),[p,j]=(0,a.useState)(!1),x=(0,t.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("rememberedUsername");"true"===localStorage.getItem("rememberMe")&&e&&(s(e),m(!0))},[]);let b=async s=>{s.preventDefault(),d(null);try{let s=await fetch("".concat("https://siap-be-production.up.railway.app/api/","login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})});if(!s.ok){let e=await s.json();d(e.error),j(!0),setTimeout(()=>j(!1),3e3);return}let o=await s.json();localStorage.setItem("authToken",o.token),u?(localStorage.setItem("rememberedUsername",e),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("rememberedUsername"),localStorage.removeItem("rememberMe")),h(!0),j(!0),setTimeout(()=>{j(!1),x.push("/dashboard")},1e3)}catch(e){d("An unexpected error occurred"),j(!0),setTimeout(()=>j(!1),3e3)}};return(0,o.jsx)("div",{className:i().loginBody,children:(0,o.jsxs)("div",{className:i().loginContainer,children:[(0,o.jsxs)("div",{className:i().logoHeaderContainer,children:[(0,o.jsx)("img",{src:"/siap-logo.png",alt:"SIAP Logo",className:i().logo}),(0,o.jsxs)("h1",{className:i().systemTitle,children:["Sistem Informasi Administrasi ",(0,o.jsx)("br",{})," dan Pengendalian Mutu"]})]}),(0,o.jsx)("h2",{className:i().loginHeading,children:"Login"}),(0,o.jsxs)("form",{onSubmit:b,children:[(0,o.jsx)("label",{className:i().label,children:"Username"}),(0,o.jsx)("input",{className:i().input,type:"text",value:e,onChange:e=>s(e.target.value),placeholder:"Masukkan Username",required:!0}),(0,o.jsx)("label",{className:i().label,children:"Password"}),(0,o.jsxs)("div",{className:i().passwordContainer,children:[(0,o.jsx)("input",{className:i().input,type:l?"text":"password",value:n,onChange:e=>r(e.target.value),placeholder:"Masukkan Password",required:!0}),(0,o.jsx)("button",{type:"button",className:i().togglePassword,onClick:()=>c(!l),children:(0,o.jsx)("img",{src:"/eye-icon.png",alt:"Show Password",className:"eye-icon"})})]}),g&&(0,o.jsx)("p",{className:"error",children:g}),(0,o.jsxs)("div",{className:i().rememberForgot,children:[(0,o.jsxs)("label",{className:i().label,children:[(0,o.jsx)("input",{className:i().input,type:"checkbox",checked:u,onChange:e=>m(e.target.checked)})," Ingat Saya"]}),(0,o.jsx)("a",{onClick:()=>x.push("/forgot-password"),style:{cursor:"pointer"},children:"Lupa Password?"})]}),(0,o.jsx)("button",{type:"submit",className:i().loginBtn,children:"Login"})]}),p&&(0,o.jsx)("div",{className:"".concat(i().notification," ").concat(_?i().success:i().failure),children:_?(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:"/success-icon.png",alt:"Success Icon",className:i().icon}),(0,o.jsx)("p",{children:"Berhasil Login!"}),(0,o.jsx)("button",{onClick:()=>j(!1),children:"OK"})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:"/error-icon.png",alt:"Error Icon",className:i().icon}),(0,o.jsx)("p",{children:"Username/Password Salah!"}),(0,o.jsx)("button",{onClick:()=>j(!1),children:"Coba lagi"})]})}),(0,o.jsx)("div",{className:i().footer,children:"@2024 optimasys | Contact optimasys.work@gmail.com"})]})})}},4285:function(e){e.exports={loginBody:"login_loginBody__EpWvB",loginContainer:"login_loginContainer__64Htg",logoHeaderContainer:"login_logoHeaderContainer__6P8I7",logo:"login_logo__t2DTB",systemTitle:"login_systemTitle__Dol4A",loginHeading:"login_loginHeading__QpMRf",label:"login_label__nmm_j",input:"login_input__KSWam",passwordContainer:"login_passwordContainer___mnuj",togglePassword:"login_togglePassword__yBL_I",error:"login_error___OnvZ",rememberForgot:"login_rememberForgot__EO9Dz",loginBtn:"login_loginBtn__outtX",notification:"login_notification__WVqBA",success:"login_success__laONQ",failure:"login_failure__VRXC3",footer:"login_footer__U6ir1"}}},function(e){e.O(0,[8525,2971,2117,1744],function(){return e(e.s=9221)}),_N_E=e.O()}]);