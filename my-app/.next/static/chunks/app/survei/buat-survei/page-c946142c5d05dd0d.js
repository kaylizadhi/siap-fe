(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1972],{6194:function(e,a,i){Promise.resolve().then(i.bind(i,5364))},9376:function(e,a,i){"use strict";var t=i(5475);i.o(t,"useParams")&&i.d(a,{useParams:function(){return t.useParams}}),i.o(t,"usePathname")&&i.d(a,{usePathname:function(){return t.usePathname}}),i.o(t,"useRouter")&&i.d(a,{useRouter:function(){return t.useRouter}})},5364:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return o}});var t=i(7437),r=i(2265),n=i(9376),s=i(6e3),u=i.n(s),l=i(83);function o(){let[e,a]=(0,r.useState)({}),[i,s]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),c=(0,n.useRouter)(),[v,h]=(0,r.useState)([]),p=async e=>{try{let a=await fetch("".concat("https://siap-be-production.up.railway.app/api/","survei/lokasi?param=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),i=await a.json();d(i)}catch(e){console.error("Error fetching daerah:",e),d([])}},_=async()=>{try{let e=await fetch("".concat("https://siap-be-production.up.railway.app/api/","klien/"),{method:"GET",headers:{"Content-Type":"application/json"}}),a=await e.json();s(a.results)}catch(e){console.error("Error fetching klien:",e),s([])}};(0,r.useEffect)(()=>{_()},[]);let m=i=>{let t=i.target.value;a({...e,ruang_lingkup:t}),p(t)},S=e=>{h(v.filter(a=>a.id!==e))},b=async()=>{if(!e.nama_survei){alert("Judul survei tidak boleh kosong.");return}if(!e.harga_survei||isNaN(e.harga_survei)){alert("Harga survei tidak boleh kosong.");return}if(!e.jumlah_responden||isNaN(e.jumlah_responden)){alert("Jumlah responden tidak boleh kosong.");return}try{let a={...e,wilayah_survei:v},i=await fetch("".concat("https://siap-be-production.up.railway.app/api/","survei/add-survei/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await i.json();(null==t?void 0:t.success)&&c.push("/survei")}catch(e){console.error("Error submitting survei:",e),c.push("/survei")}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{className:u().headingSurvei,children:"Daftar Survei"}),(0,t.jsxs)("form",{onSubmit:b,className:u().containerSurvei,children:[(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Nama Survei"}),(0,t.jsx)("input",{className:u().textFieldSurvei,type:"text",placeholder:"Masukkan judul survei",onChange:i=>a({...e,nama_survei:i.target.value})}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Nama Klien"}),(0,t.jsx)("select",{className:u().textFieldSurveiDropdown,onChange:i=>a({...e,klien_id:i.target.value}),children:i.length>0?i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nama_klien},e.id)):(0,t.jsx)("option",{disabled:!0,children:"Data klien tidak tersedia"})}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Ruang Lingkup Survei"}),(0,t.jsx)("div",{className:u().radioGroupSurvei,children:["Nasional","Provinsi","Kota"].map(e=>(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:"ruanglingkup",value:e,onChange:m}),e]},e))}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Daerah"}),(0,t.jsx)("ul",{className:u().daerahList,children:v.map(e=>(0,t.jsxs)("li",{className:u().daerahList,children:[e.name,(0,t.jsx)("button",{style:{marginLeft:"10px"},onClick:()=>S(e.id),children:"Hapus"})]},e.id))}),(0,t.jsxs)("select",{id:"daerahSelect",className:u().textFieldSurveiDropdown,children:[(0,t.jsx)("option",{value:"",children:"Pilih Daerah"}),o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)(l.Z,{className:u().iconEdit,onClick:()=>{let e=document.getElementById("daerahSelect"),a=e.value,i=e.options[e.selectedIndex].text;a?v.some(e=>e.id===a)?alert("".concat(i," sudah ada dalam daftar.")):h([...v,{id:a,name:i}]):alert("Pilih daerah terlebih dahulu.")}}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Harga"}),(0,t.jsx)("input",{className:u().textFieldSurvei,type:"number",placeholder:"Masukkan harga",onChange:i=>a({...e,harga_survei:i.target.value})}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Jumlah Responden"}),(0,t.jsx)("input",{className:u().textFieldSurvei,type:"number",placeholder:"Masukkan jumlah responden",onChange:i=>a({...e,jumlah_responden:i.target.value})}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Tanggal Mulai"}),(0,t.jsx)("input",{min:new Date().toISOString().split("T")[0],className:u().textFieldSurvei,type:"date",onChange:i=>a({...e,waktu_mulai_survei:i.target.value})}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Tanggal Berakhir"}),(0,t.jsx)("input",{min:new Date().toISOString().split("T")[0],className:u().textFieldSurvei,type:"date",onChange:i=>a({...e,waktu_berakhir_survei:i.target.value})}),(0,t.jsx)("b",{className:u().textFieldTitleSurvei,children:"Tipe Survei"}),(0,t.jsxs)("select",{className:u().textFieldSurveiDropdown,onChange:i=>a({...e,tipe_survei:i.target.value}),children:[(0,t.jsx)("option",{value:"Paper-based",children:"Paper-based"}),(0,t.jsx)("option",{value:"Digital",children:"Digital"}),(0,t.jsx)("option",{value:"Lainnya",children:"Lainnya"})]}),(0,t.jsx)("button",{type:"submit",className:u().primaryButtonSurvei,children:"Simpan"}),(0,t.jsx)("button",{type:"button",onClick:()=>{c.push("/survei")},className:u().secondaryButtonSurvei,children:"Batal"})]})]})}},6e3:function(e){e.exports={headingSurvei:"survei_headingSurvei__hWzo8",buttonTambahSurvei:"survei_buttonTambahSurvei__gJe_e",iconChevron:"survei_iconChevron__FydQC",buttonEnabledSebelumnya:"survei_buttonEnabledSebelumnya__Cz3nY",buttonDisabledSebelumnya:"survei_buttonDisabledSebelumnya__gqkct",buttonEnabledSelanjutnya:"survei_buttonEnabledSelanjutnya__oqIC6",buttonDisabledSelanjutnya:"survei_buttonDisabledSelanjutnya__2WOb3",buttonSurvei:"survei_buttonSurvei__hdXsX",iconSurvei:"survei_iconSurvei__uE6hZ",tableContainerSurvei:"survei_tableContainerSurvei__DWZrT",containerSurvei:"survei_containerSurvei__htfRQ",textFieldSurvei:"survei_textFieldSurvei__UJ9hf",textFieldSurveiDropdown:"survei_textFieldSurveiDropdown__Gy6zJ",textFieldTitleSurvei:"survei_textFieldTitleSurvei__Wb5nm",primaryButtonSurvei:"survei_primaryButtonSurvei__jrQF0",secondaryButtonSurvei:"survei_secondaryButtonSurvei__ZwVxE",searchBarContainer:"survei_searchBarContainer__ZnWTU",iconSearch:"survei_iconSearch__ySMWd",searchBar:"survei_searchBar__RDH9p",idContainer:"survei_idContainer__G8hnp",radioGroupSurvei:"survei_radioGroupSurvei__NNY3u",iconEdit:"survei_iconEdit__U5F8i",daerahList:"survei_daerahList__7Yweb"}},83:function(e,a,i){"use strict";var t=i(2265);let r=t.forwardRef(function(e,a){let{title:i,titleId:r,...n}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),i?t.createElement("title",{id:r},i):null,t.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))});a.Z=r}},function(e){e.O(0,[3878,2971,2117,1744],function(){return e(e.s=6194)}),_N_E=e.O()}]);