(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8184],{6913:function(e,a,t){Promise.resolve().then(t.bind(t,3782))},9376:function(e,a,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(a,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(a,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(a,{useRouter:function(){return n.useRouter}})},3782:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return l}});var n=t(7437),s=t(2265),u=t(9376),i=t(9245),r=t.n(i);function l(){let[e,a]=(0,s.useState)(""),[t,i]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[b,h]=(0,s.useState)(""),[_,k]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),[j,f]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[N,S]=(0,s.useState)(!1),C=(0,u.useRouter)();(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("authToken");if(!e){C.push("/login");return}try{let a=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_admin/"),{headers:{Authorization:"Token ".concat(e)}}),t=await a.json();(t.error||"Admin Sistem"!==t.role)&&C.push("/login")}catch(e){console.error("Failed to verify role:",e),C.push("/login")}})()},[C]);let w=async a=>{a.preventDefault(),f(null);let n=t.split(" "),s=n[0]||"",u=n.slice(1).join(" ")||"";if(!e||!t||!l||!_||!c||!p||!b){f("Semua field harus diisi!"),S(!0),setTimeout(()=>S(!1),3e3);return}if(!/\d/.test(b)){f("Password harus mengandung angka!"),S(!0),setTimeout(()=>S(!1),3e3);return}try{let a=await fetch("".concat("https://siap-be-production.up.railway.app/api/","buatAkun/api/buatAkun/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:s,last_name:u,email:l,username:e,role:_,security_question:c,security_answer:p,password:b})});if(console.log("Response received:",a),!a.ok)throw Error("Failed to make document");y(!0),S(!0),setTimeout(()=>{S(!1),C.push("/dashboard")},1e3)}catch(e){console.error(e),f("Gagal membuat akun. Coba lagi."),S(!0),setTimeout(()=>S(!1),3e3)}};return(0,n.jsx)("div",{className:r().buatakunBody,children:(0,n.jsxs)("div",{className:r().buatakunContainer,children:[(0,n.jsx)("h2",{className:r().buatakunHeading,children:"Buat Akun"}),(0,n.jsxs)("form",{onSubmit:w,children:[(0,n.jsx)("label",{className:r().label,children:"Username"}),(0,n.jsx)("input",{className:r().input,type:"text",value:e,onChange:e=>a(e.target.value),placeholder:"Masukkan Username",required:!0}),(0,n.jsx)("label",{className:r().label,children:"Name"}),(0,n.jsx)("input",{className:r().input,type:"text",value:t,onChange:e=>i(e.target.value),placeholder:"Masukkan Nama",required:!0}),(0,n.jsx)("label",{className:r().label,children:"Email"}),(0,n.jsx)("input",{className:r().input,type:"email",value:l,onChange:e=>o(e.target.value),placeholder:"Masukkan Email",required:!0}),(0,n.jsx)("label",{className:r().label,children:"Role"}),(0,n.jsxs)("select",{className:r().input,value:_,onChange:e=>k(e.target.value),required:!0,children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Pilih Role"}),(0,n.jsx)("option",{value:"Eksekutif",children:"Eksekutif"}),(0,n.jsx)("option",{value:"Administrasi",children:"Administrasi"}),(0,n.jsx)("option",{value:"Admin Sistem",children:"Admin Sistem"}),(0,n.jsx)("option",{value:"Logistik",children:"Logistik"}),(0,n.jsx)("option",{value:"Pengendali Mutu",children:"Pengendali Mutu"})]}),(0,n.jsx)("label",{className:r().label,children:"Security Question"}),(0,n.jsx)("input",{className:r().input,type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Buat Security Question",required:!0}),(0,n.jsx)("label",{className:r().label,children:"Security Answer"}),(0,n.jsx)("input",{className:r().input,type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"Buat Jawaban dari Security Question",required:!0}),(0,n.jsx)("label",{className:r().label,children:"Password"}),(0,n.jsxs)("div",{className:r().passwordContainer,children:[(0,n.jsx)("input",{className:r().input,type:g?"text":"password",value:b,onChange:e=>h(e.target.value),placeholder:"Masukkan Password",required:!0}),(0,n.jsx)("button",{type:"button",className:r().togglePassword,onClick:()=>x(!g),children:(0,n.jsx)("img",{src:"/eye-icon.png",alt:"Toggle Password Visibility"})})]}),j&&(0,n.jsx)("p",{className:r().error,children:j}),(0,n.jsx)("button",{type:"submit",className:r().simpanBtn,children:"Simpan"}),(0,n.jsx)("button",{type:"button",className:r().batalBtn,onClick:()=>{a(""),i(""),o(""),d(""),m(""),h(""),k("")},children:"Batal"})]}),N&&(0,n.jsx)("div",{className:"".concat(r().notification," ").concat(v?r().success:r().failure),children:v?(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:"/success-icon.png",alt:"Success Icon"}),(0,n.jsx)("p",{children:"Berhasil Membuat Akun!"}),(0,n.jsx)("button",{onClick:()=>S(!1),children:"OK"})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:"/error-icon.png",alt:"Error Icon"}),(0,n.jsx)("p",{children:j}),(0,n.jsx)("button",{onClick:()=>S(!1),children:"Coba lagi"})]})}),(0,n.jsx)("div",{className:r().footer,children:"@2024 optimasys | Contact optimasys.work@gmail.com"})]})})}},9245:function(e){e.exports={buatakunBody:"buat-akun_buatakunBody__oWIZQ",buatakunContainer:"buat-akun_buatakunContainer__KzFb7",buatakunHeaderContainer:"buat-akun_buatakunHeaderContainer__Kp9Lg",logo:"buat-akun_logo__b4hfH",buatkunHeading:"buat-akun_buatkunHeading___VXso",label:"buat-akun_label__pHHMb",input:"buat-akun_input__GHlS3",passwordContainer:"buat-akun_passwordContainer__6TLfd",togglePassword:"buat-akun_togglePassword__UZUoT",error:"buat-akun_error__8rLTu",rememberForgot:"buat-akun_rememberForgot__T9KAk",simpanBtn:"buat-akun_simpanBtn__LM5NR",batalBtn:"buat-akun_batalBtn__4_Iy9",notification:"buat-akun_notification__tX2a2",success:"buat-akun_success__ZRA0V",failure:"buat-akun_failure__XXuUD",footer:"buat-akun_footer__1ue3Z"}}},function(e){e.O(0,[211,2971,2117,1744],function(){return e(e.s=6913)}),_N_E=e.O()}]);