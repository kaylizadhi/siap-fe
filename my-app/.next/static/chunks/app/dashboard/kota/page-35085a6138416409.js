(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3800],{7990:function(a,e,t){Promise.resolve().then(t.bind(t,1816))},9376:function(a,e,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(e,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(e,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(e,{useRouter:function(){return r.useRouter}})},1816:function(a,e,t){"use strict";t.r(e);var r=t(7437),n=t(2265),s=t(9376),i=t(2051),o=t.n(i);t(7648),e.default=()=>{let a=(0,s.useRouter)(),[e,t]=(0,n.useState)(0),[i,c]=(0,n.useState)(1),[d,l]=(0,n.useState)(""),[h,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("authToken");if(!e){a.push("/login");return}try{let t=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_dashboard/"),{headers:{Authorization:"Token ".concat(e)}}),r=await t.json();(r.error||!["Administrasi","Eksekutif","Logistik"].includes(r.role))&&a.push("/login")}catch(e){console.error("Failed to verify role:",e),a.push("/login")}})()},[a]);let _=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),b=e=>{a.push("/tracker-survei/".concat(e))},m=e=>{a.push("/survei/".concat(e))},p=e=>{let t=e.target.value;l(t),a.push({nasional:"/dashboard/nasional",provinsi:"/dashboard/provinsi",kota:"/dashboard/kota",keseluruhan:"/dashboard"}[t])};return(0,n.useEffect)(()=>{l("kota"),async function(){try{let a=await fetch("".concat("https://siap-be-production.up.railway.app/api/","dashboard/survei/kota/"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Network response was not ok");let e=await a.json();u(e),console.log(e)}catch(a){console.error("Failed to fetch data:",a)}}()},[i]),(0,r.jsx)("div",{className:o().containerBackground,children:(0,r.jsx)("div",{className:o().container,children:(0,r.jsxs)("div",{className:o().content,children:[(0,r.jsx)("h1",{className:o().title,children:"Dashboard Progres Survei"}),(0,r.jsxs)("div",{className:o().surveyTypeSection,children:[(0,r.jsx)("label",{className:o().label,children:"Pilih Jenis Survei"}),(0,r.jsx)("div",{className:o().radioGroup,children:["keseluruhan","nasional","provinsi","kota"].map(a=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("input",{type:"radio",id:a,name:"surveyType",value:a,checked:d===a,onChange:p}),(0,r.jsxs)("label",{htmlFor:a,children:["Survei ",a]})]},a))})]}),(0,r.jsx)("div",{className:o().tableContainer,children:(0,r.jsxs)("table",{className:o().table,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Nama Klien"}),(0,r.jsx)("th",{children:"Judul Survei"}),(0,r.jsx)("th",{children:"Tanggal Mulai"}),(0,r.jsx)("th",{children:"Tanggal Berakhir"}),(0,r.jsx)("th",{children:"Wilayah"}),(0,r.jsx)("th",{children:"Jumlah Responden"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Action"})]})}),(0,r.jsx)("tbody",{children:h.map(a=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[(0,r.jsx)("img",{src:"/images/Profile.svg",alt:"User Icon",className:o().icon})," ",a.nama_klien]}),(0,r.jsx)("td",{children:a.nama_survei}),(0,r.jsx)("td",{children:a.waktu_mulai_survei&&_(a.waktu_mulai_survei)}),(0,r.jsx)("td",{children:a.waktu_berakhir_survei&&_(a.waktu_berakhir_survei)}),(0,r.jsx)("td",{children:a.wilayah_survei}),(0,r.jsx)("td",{children:a.jumlah_responden}),(0,r.jsx)("td",{children:a.last_status}),(0,r.jsxs)("td",{className:o().actions,children:[(0,r.jsx)("button",{className:o().actionButton,onClick:()=>m(a.id),children:"Lihat Detail Survei"}),(0,r.jsx)("button",{className:o().actionButton,onClick:()=>b(a.id),children:"Lihat Tracker Survei"})]})]},a.id))})]})})]})})})}},2051:function(a){a.exports={containerBackground:"dashboard_containerBackground___FMAG",container:"dashboard_container__UvVTH",content:"dashboard_content__SfbXD",title:"dashboard_title__S4EtT",label:"dashboard_label__SgCdD",diagramPlaceholder:"dashboard_diagramPlaceholder__183tN",chartContainer:"dashboard_chartContainer__c4zUU",tableContainer:"dashboard_tableContainer__ZnNcP",table:"dashboard_table__Tg8SY",badge:"dashboard_badge__nmimx",iconContainer:"dashboard_iconContainer__BgqBP",radioGroup:"dashboard_radioGroup__dMK_9",actionButton:"dashboard_actionButton__Zrwfx"}}},function(a){a.O(0,[4427,7648,2971,2117,1744],function(){return a(a.s=7990)}),_N_E=a.O()}]);