(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7287],{6601:function(a,e,t){Promise.resolve().then(t.bind(t,1363))},9376:function(a,e,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(e,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(e,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(e,{useRouter:function(){return n.useRouter}})},1363:function(a,e,t){"use strict";t.r(e);var n=t(7437),r=t(2265),s=t(9376),i=t(2051),o=t.n(i);t(7648),e.default=()=>{let a=(0,s.useRouter)(),[e,t]=(0,r.useState)(0),[i,c]=(0,r.useState)(1),[l,d]=(0,r.useState)(""),[h,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("authToken");if(!e){a.push("/login");return}try{let t=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_dashboard/"),{headers:{Authorization:"Token ".concat(e)}}),n=await t.json();(n.error||!["Administrasi","Eksekutif","Logistik"].includes(n.role))&&a.push("/login")}catch(e){console.error("Failed to verify role:",e),a.push("/login")}})()},[a]);let _=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),b=e=>{a.push("/tracker-survei/".concat(e))},m=e=>{a.push("/survei/".concat(e))},p=e=>{let t=e.target.value;d(t),a.push({nasional:"/dashboard/nasional",provinsi:"/dashboard/provinsi",kota:"/dashboard/kota",keseluruhan:"/dashboard"}[t])};return(0,r.useEffect)(()=>{d("nasional"),async function(){try{let a=await fetch("".concat("https://siap-be-production.up.railway.app/api/","dashboard/survei/nasional/"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Network response was not ok");let e=await a.json();u(e),console.log(e)}catch(a){console.error("Failed to fetch data:",a)}}()},[i]),(0,n.jsx)("div",{className:o().containerBackground,children:(0,n.jsx)("div",{className:o().container,children:(0,n.jsxs)("div",{className:o().content,children:[(0,n.jsx)("h1",{className:o().title,children:"Dashboard Progres Survei"}),(0,n.jsxs)("div",{className:o().surveyTypeSection,children:[(0,n.jsx)("label",{className:o().label,children:"Pilih Jenis Survei"}),(0,n.jsx)("div",{className:o().radioGroup,children:["keseluruhan","nasional","provinsi","kota"].map(a=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("input",{type:"radio",id:a,name:"surveyType",value:a,checked:l===a,onChange:p}),(0,n.jsxs)("label",{htmlFor:a,children:["Survei ",a]})]},a))})]}),(0,n.jsx)("div",{className:o().tableContainer,children:(0,n.jsxs)("table",{className:o().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Nama Klien"}),(0,n.jsx)("th",{children:"Judul Survei"}),(0,n.jsx)("th",{children:"Tanggal Mulai"}),(0,n.jsx)("th",{children:"Tanggal Berakhir"}),(0,n.jsx)("th",{children:"Wilayah"}),(0,n.jsx)("th",{children:"Jumlah Responden"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:h.map(a=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[(0,n.jsx)("img",{src:"/images/Profile.svg",alt:"User Icon",className:o().icon})," ",a.nama_klien]}),(0,n.jsx)("td",{children:a.nama_survei}),(0,n.jsx)("td",{children:a.waktu_mulai_survei&&_(a.waktu_mulai_survei)}),(0,n.jsx)("td",{children:a.waktu_berakhir_survei&&_(a.waktu_berakhir_survei)}),(0,n.jsx)("td",{children:a.wilayah_survei}),(0,n.jsx)("td",{children:a.jumlah_responden}),(0,n.jsx)("td",{children:a.last_status}),(0,n.jsxs)("td",{className:o().actions,children:[(0,n.jsx)("button",{className:o().actionButton,onClick:()=>m(a.id),children:"Lihat Detail Survei"}),(0,n.jsx)("button",{className:o().actionButton,onClick:()=>b(a.id),children:"Lihat Tracker Survei"})]})]},a.id))})]})})]})})})}},2051:function(a){a.exports={containerBackground:"dashboard_containerBackground___FMAG",container:"dashboard_container__UvVTH",content:"dashboard_content__SfbXD",title:"dashboard_title__S4EtT",label:"dashboard_label__SgCdD",diagramPlaceholder:"dashboard_diagramPlaceholder__183tN",chartContainer:"dashboard_chartContainer__c4zUU",tableContainer:"dashboard_tableContainer__ZnNcP",table:"dashboard_table__Tg8SY",badge:"dashboard_badge__nmimx",iconContainer:"dashboard_iconContainer__BgqBP",radioGroup:"dashboard_radioGroup__dMK_9",actionButton:"dashboard_actionButton__Zrwfx"}}},function(a){a.O(0,[4427,7648,2971,2117,1744],function(){return a(a.s=6601)}),_N_E=a.O()}]);