(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{1910:function(e,a,r){Promise.resolve().then(r.bind(r,8580))},9376:function(e,a,r){"use strict";var i=r(5475);r.o(i,"useParams")&&r.d(a,{useParams:function(){return i.useParams}}),r.o(i,"usePathname")&&r.d(a,{usePathname:function(){return i.usePathname}}),r.o(i,"useRouter")&&r.d(a,{useRouter:function(){return i.useRouter}})},8580:function(e,a,r){"use strict";r.r(a);var i=r(7437),n=r(2265),t=r(9376),s=r(2051),o=r.n(s);r(7648),a.default=()=>{let e=(0,t.useRouter)(),[a,r]=(0,n.useState)(0),[s,d]=(0,n.useState)(1),[l,c]=(0,n.useState)(""),[u,h]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{let a=localStorage.getItem("authToken");if(!a){e.push("/login");return}try{let r=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_dashboard/"),{headers:{Authorization:"Token ".concat(a)}}),i=await r.json();(i.error||!["Administrasi","Eksekutif","Logistik"].includes(i.role))&&e.push("/login")}catch(a){console.error("Failed to verify role:",a),e.push("/login")}})()},[e]);let v=e=>new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),_=a=>{e.push("/tracker-survei/".concat(a))},b=a=>{e.push("/survei/".concat(a))},m=a=>{let r=a.target.value;c(r),e.push({nasional:"/dashboard/nasional",provinsi:"/dashboard/provinsi",kota:"/dashboard/kota",keseluruhan:"/dashboard"}[r])};return(0,n.useEffect)(()=>{(async function(){try{let e=await fetch("".concat("https://siap-be-production.up.railway.app/api/","survei-status/dashboard/"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Network response was not ok");let a=await e.json();h(a),console.log(a)}catch(e){console.error("Failed to fetch data:",e)}})()},[s]),(0,i.jsx)("div",{className:o().containerBackground,children:(0,i.jsx)("div",{className:o().container,children:(0,i.jsxs)("div",{className:o().content,children:[(0,i.jsx)("h1",{className:o().title,children:"Dashboard Progres Survei"}),(0,i.jsxs)("div",{className:o().surveyTypeSection,children:[(0,i.jsx)("label",{className:o().label,children:"Pilih Jenis Survei"}),(0,i.jsx)("div",{className:o().radioGroup,children:["keseluruhan","nasional","provinsi","kota"].map(e=>(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("input",{type:"radio",id:e,name:"surveyType",value:e,checked:l===e,onChange:m}),(0,i.jsxs)("label",{htmlFor:e,children:["Survei ",e]})]},e))})]}),(0,i.jsx)("div",{className:o().tableContainer,children:(0,i.jsxs)("table",{className:o().table,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Nama Klien"}),(0,i.jsx)("th",{children:"Judul Survei"}),(0,i.jsx)("th",{children:"Tanggal Mulai"}),(0,i.jsx)("th",{children:"Tanggal Berakhir"}),(0,i.jsx)("th",{children:"Wilayah"}),(0,i.jsx)("th",{children:"Jumlah Responden"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Action"})]})}),(0,i.jsx)("tbody",{children:u.map(e=>{var a,r,n,t,s,d,l;return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("img",{src:"/images/Profile.svg",alt:"User Icon",className:o().icon})," ",e.survei.nama_klien]}),(0,i.jsx)("td",{children:null===(a=e.survei)||void 0===a?void 0:a.nama_survei}),(0,i.jsx)("td",{children:(null===(r=e.survei)||void 0===r?void 0:r.waktu_mulai_survei)&&v(null===(n=e.survei)||void 0===n?void 0:n.waktu_mulai_survei)}),(0,i.jsx)("td",{children:(null===(t=e.survei)||void 0===t?void 0:t.waktu_berakhir_survei)&&v(null===(s=e.survei)||void 0===s?void 0:s.waktu_berakhir_survei)}),(0,i.jsx)("td",{children:null===(d=e.survei)||void 0===d?void 0:d.wilayah_survei}),(0,i.jsx)("td",{children:null===(l=e.survei)||void 0===l?void 0:l.jumlah_responden}),(0,i.jsx)("td",{children:e.last_status}),(0,i.jsxs)("td",{className:o().actions,children:[(0,i.jsx)("button",{className:o().actionButton,onClick:()=>{var a;return b(null===(a=e.survei)||void 0===a?void 0:a.id)},children:"Lihat Detail Survei"}),(0,i.jsx)("button",{className:o().actionButton,onClick:()=>{var a;return _(null===(a=e.survei)||void 0===a?void 0:a.id)},children:"Lihat Tracker Survei"})]})]},e.survei.id)})})]})})]})})})}},2051:function(e){e.exports={containerBackground:"dashboard_containerBackground___FMAG",container:"dashboard_container__UvVTH",content:"dashboard_content__SfbXD",title:"dashboard_title__S4EtT",label:"dashboard_label__SgCdD",diagramPlaceholder:"dashboard_diagramPlaceholder__183tN",chartContainer:"dashboard_chartContainer__c4zUU",tableContainer:"dashboard_tableContainer__ZnNcP",table:"dashboard_table__Tg8SY",badge:"dashboard_badge__nmimx",iconContainer:"dashboard_iconContainer__BgqBP",radioGroup:"dashboard_radioGroup__dMK_9",actionButton:"dashboard_actionButton__Zrwfx"}}},function(e){e.O(0,[4427,7648,2971,2117,1744],function(){return e(e.s=1910)}),_N_E=e.O()}]);