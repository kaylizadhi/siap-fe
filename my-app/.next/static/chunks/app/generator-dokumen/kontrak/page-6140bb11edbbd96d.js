(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2929],{4249:function(e,n,o){Promise.resolve().then(o.bind(o,6180))},9376:function(e,n,o){"use strict";var a=o(5475);o.o(a,"useParams")&&o.d(n,{useParams:function(){return a.useParams}}),o.o(a,"usePathname")&&o.d(n,{usePathname:function(){return a.usePathname}}),o.o(a,"useRouter")&&o.d(n,{useRouter:function(){return a.useRouter}})},6180:function(e,n,o){"use strict";o.r(n);var a=o(7437),t=o(2265),r=o(9376),i=o(6947),l=o.n(i);n.default=()=>{let e=(0,r.useRouter)(),[n,o]=(0,t.useState)(""),[i,u]=(0,t.useState)(!1),[d,s]=(0,t.useState)(null);(0,t.useEffect)(()=>{let n=async()=>{let e=await fetch("".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/convert_pptx_to_image/"));if(e.ok){let n=await e.blob();setSlideImage(URL.createObjectURL(n))}else console.error("Failed to load slide image.")};(async()=>{let n=localStorage.getItem("authToken");if(!n){e.push("/login");return}try{let o=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_proposal/"),{headers:{Authorization:"Token ".concat(n)}}),a=await o.json();(a.error||"Administrasi"!==a.role&&"Eksekutif"!==a.role)&&e.push("/login")}catch(n){console.error("Failed to verify role:",n),e.push("/login")}})(),n()},[e]);let c=async()=>{try{let e=await fetch("".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/download_template_kontrak/"),{method:"GET"});if(!e.ok)throw Error("Failed to download the template");let n=await e.blob(),o=window.URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download="templateKontrak.docx",document.body.appendChild(a),a.click(),a.remove()}catch(e){console.error("Error downloading template:",e)}},p=n=>{let a=n.target.value;o(a),"invoiceDP"===a&&e.push("/generator-dokumen/invoice-dp"),"invoiceFinal"===a&&e.push("/generator-dokumen/invoice-final"),"proposal"===a&&e.push("/generator-dokumen/proposal"),"kwitansiDP"===a&&e.push("/generator-dokumen/kwitansi-dp"),"kwitansiFinal"===a&&e.push("/generator-dokumen/kwitansi-final")},m=async()=>{if(!d){alert("Please select a file to upload.");return}if(window.confirm("Apakah anda yakin ingin mengubah template kontrak pada sistem?")&&d){let e=new FormData;e.append("template",d);try{let n=localStorage.getItem("authToken");if(!(await fetch("".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/upload_template_kontrak/"),{method:"POST",headers:{Authorization:"Token ".concat(n)},body:e})).ok)throw Error("Failed to upload the template");alert("Template uploaded successfully!"),u(!i),s()}catch(e){console.error("Error uploading template:",e),alert("Error uploading template")}}};return(0,a.jsxs)("div",{className:l().containerbackground,children:[(0,a.jsx)("div",{className:l().container,children:(0,a.jsxs)("div",{className:l().content,children:[(0,a.jsx)("h1",{className:l().title,children:"Buat Dokumen"}),(0,a.jsxs)("div",{className:l().docType,children:[(0,a.jsx)("label",{className:l().label,children:"Jenis Dokumen"}),(0,a.jsxs)("div",{className:l().radioGroup,children:[(0,a.jsx)("input",{type:"radio",id:"Proposal",name:"docType",value:"proposal",checked:"proposal"===n,onChange:p}),(0,a.jsx)("label",{htmlFor:"proposal",children:"Proposal"}),(0,a.jsx)("input",{type:"radio",id:"kontrak",name:"docType",value:"kontrak",checked:!0,readOnly:!0}),(0,a.jsx)("label",{htmlFor:"kontrak",children:"Kontrak"}),(0,a.jsx)("input",{type:"radio",id:"invoiceDP",name:"docType",value:"invoiceDP",checked:"invoiceDP"===n,onChange:p}),(0,a.jsx)("label",{htmlFor:"invoiceDP",children:"Invoice DP"}),(0,a.jsx)("input",{type:"radio",id:"invoiceFinal",name:"docType",value:"invoiceFinal",checked:"invoiceFinal"===n,onChange:p}),(0,a.jsx)("label",{htmlFor:"invoiceFinal",children:"Invoice Final"}),(0,a.jsx)("input",{type:"radio",id:"kwitansiDP",name:"docType",value:"kwitansiDP",checked:"kwitansiDP"===n,onChange:p}),(0,a.jsx)("label",{htmlFor:"kwitansiDP",children:"Kwitansi DP"}),(0,a.jsx)("input",{type:"radio",id:"kwitansiFinal",name:"docType",value:"kwitansiFinal",checked:"kwitansiFinal"===n,onChange:p}),(0,a.jsx)("label",{htmlFor:"kwitansiFinal",children:"Kwitansi Final"})]})]}),(0,a.jsx)("div",{className:l().subtitle,children:"Template Kontrak Survey"}),(0,a.jsx)("img",{src:"/images/kontrak_preview.png",alt:"Template Preview",className:l().kontrakImage}),(0,a.jsxs)("div",{className:l().buttonGroup,children:[(0,a.jsx)("button",{type:"button",onClick:()=>{u(!i)},className:l().uploadButton,children:"Upload Template Baru"}),(0,a.jsxs)("button",{type:"button",className:l().exportButton,onClick:c,children:[(0,a.jsx)("img",{src:"/images/AddItem.svg",alt:"Export Icon"}),"Export"]})]}),(0,a.jsx)("div",{children:i&&(0,a.jsxs)("div",{className:l().uploadContainer,onDrop:e=>{e.preventDefault();let n=e.dataTransfer.files[0];n&&n.name.endsWith(".docx")?s(n):alert("Only .docx files are allowed.")},onDragOver:e=>{e.preventDefault()},children:[(0,a.jsxs)("label",{className:l().fileInputLabel,htmlFor:"fileInput",children:[(0,a.jsx)("img",{src:"/images/upload_icon.svg",alt:"Upload Icon",className:l().uploadIcon}),(0,a.jsx)("p",{children:"Unggah Dokumen"}),(0,a.jsx)("p",{className:l().uploadSubtitle,children:"Format file: .docx"})]}),(0,a.jsx)("input",{type:"file",id:"fileInput",accept:".docx",onChange:e=>{let n=e.target.files[0];n&&n.name.endsWith(".docx")?s(n):alert("Only .docx files are allowed.")},className:l().fileInput}),d&&(0,a.jsxs)("p",{children:["Selected file: ",d.name]}),(0,a.jsx)("button",{type:"button",onClick:m,className:l().uploadConfirmButton,children:"Upload"})]})})]})}),(0,a.jsx)("div",{className:l().footer,children:"@2024 optimasys | Contact optimasys.work@gmail.com"})]})}},6947:function(e){e.exports={containerbackground:"generator-dokumen_containerbackground__FEzrU",container:"generator-dokumen_container__8j_qO",sidebar:"generator-dokumen_sidebar__u5qSZ",logo:"generator-dokumen_logo__qBrkw",icon:"generator-dokumen_icon___xo4c",nav:"generator-dokumen_nav__EmhF8",active:"generator-dokumen_active__TJZCN",logout:"generator-dokumen_logout__pLyqY",content:"generator-dokumen_content__cI__R",title:"generator-dokumen_title__jKNIU",subtitle:"generator-dokumen_subtitle__l1fPS",label:"generator-dokumen_label__sOjMv",form:"generator-dokumen_form__jya9Y",docType:"generator-dokumen_docType__PDR2H",exportSection:"generator-dokumen_exportSection__Q7w0R",radioGroup:"generator-dokumen_radioGroup__rCw8O",inputGroup:"generator-dokumen_inputGroup__Luvar",inputRow:"generator-dokumen_inputRow__3GpcW",nominalContainer:"generator-dokumen_nominalContainer__mdFn2",percentageContainer:"generator-dokumen_percentageContainer__HEG8s",nominalInput:"generator-dokumen_nominalInput__BhKTj",percentageInput:"generator-dokumen_percentageInput__zEMyN",datePicker:"generator-dokumen_datePicker__WXM_b",buttonGroup:"generator-dokumen_buttonGroup__wHz_0",submitButton:"generator-dokumen_submitButton__kDxe0",cancelButton:"generator-dokumen_cancelButton__MuCvK",exportButton:"generator-dokumen_exportButton__l0xMg",uploadButton:"generator-dokumen_uploadButton__e55iU",uploadConfirmButton:"generator-dokumen_uploadConfirmButton__D166G",image:"generator-dokumen_image__ZlmSn",kontrakImage:"generator-dokumen_kontrakImage__raqbj",footer:"generator-dokumen_footer__cnKQT",uploadContainer:"generator-dokumen_uploadContainer__P9Niw",uploadSubtitle:"generator-dokumen_uploadSubtitle__csQdM",fileInputLabel:"generator-dokumen_fileInputLabel__tCgH7",fileInput:"generator-dokumen_fileInput__KICVO"}}},function(e){e.O(0,[0,2971,2117,1744],function(){return e(e.s=4249)}),_N_E=e.O()}]);