(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4911],{2001:function(e,n,a){Promise.resolve().then(a.bind(a,6594))},9376:function(e,n,a){"use strict";var t=a(5475);a.o(t,"useParams")&&a.d(n,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(n,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(n,{useRouter:function(){return t.useRouter}})},6594:function(e,n,a){"use strict";a.r(n);var t=a(7437),o=a(2265),r=a(9376),i=a(6947),l=a.n(i);n.default=()=>{let e=(0,r.useRouter)(),[n,a]=(0,o.useState)("");(0,o.useEffect)(()=>{(async()=>{let n=localStorage.getItem("authToken");if(!n){e.push("/login");return}try{let a=await fetch("".concat("https://siap-be-production.up.railway.app/api/","accounts/check_role_administrasi/"),{headers:{Authorization:"Token ".concat(n)}}),t=await a.json();(t.error||"Administrasi"!==t.role)&&e.push("/login")}catch(n){console.error("Failed to verify role:",n),e.push("/login")}})()},[e]);let i=async()=>{if(!s||!d||!p||!_||!k||!x||!j||!C){alert("Mohon mengisi semua yang ditandai dengan * sebelum mengekspor.");return}console.log("Export button clicked");let e={client_name:s,survey_name:d,respondent_count:p,address:_,amount:k,paid_percentage:x,nominal_tertulis:j,additional_info:y,date:C};console.log("Data to send:",e);try{let n=await fetch("".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/generate_invoice_dp/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Response received:",n),!n.ok)throw Error("Failed to export document");let a=await n.blob(),t=window.URL.createObjectURL(a),o=document.createElement("a");o.href=t,o.download="invoiceDP_".concat(d,".xlsx"),document.body.appendChild(o),o.click(),o.remove()}catch(e){console.error("Error exporting document:",e)}},[s,u]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[p,m]=(0,o.useState)(""),[_,h]=(0,o.useState)(""),[k,g]=(0,o.useState)(""),[x,v]=(0,o.useState)(""),[j,b]=(0,o.useState)(""),[y,f]=(0,o.useState)(""),[C,N]=(0,o.useState)(""),w=n=>{let t=n.target.value;a(t),"proposal"===t&&e.push("/generator-dokumen/proposal"),"invoiceFinal"===t&&e.push("/generator-dokumen/invoice-final"),"kontrak"===t&&e.push("/generator-dokumen/kontrak"),"kwitansiDP"===t&&e.push("/generator-dokumen/kwitansi-dp"),"kwitansiFinal"===t&&e.push("/generator-dokumen/kwitansi-final")};return(0,t.jsxs)("div",{className:l().containerbackground,children:[(0,t.jsxs)("div",{className:l().content,children:[(0,t.jsx)("h1",{className:l().title,children:"Buat Dokumen"}),(0,t.jsxs)("div",{className:l().docType,children:[(0,t.jsx)("label",{className:l().label,children:"Jenis Dokumen"}),(0,t.jsxs)("div",{className:l().radioGroup,children:[(0,t.jsx)("input",{type:"radio",id:"Proposal",name:"docType",value:"proposal",checked:"proposal"===n,onChange:w}),(0,t.jsx)("label",{htmlFor:"proposal",children:"Proposal"}),(0,t.jsx)("input",{type:"radio",id:"kontrak",name:"docType",value:"kontrak",checked:"kontrak"===n,onChange:w}),(0,t.jsx)("label",{htmlFor:"kontrak",children:"Kontrak"}),(0,t.jsx)("input",{type:"radio",id:"invoiceDP",name:"docType",value:"invoiceDP",checked:!0,onChange:w}),(0,t.jsx)("label",{htmlFor:"invoiceDP",children:"Invoice DP"}),(0,t.jsx)("input",{type:"radio",id:"invoiceFinal",name:"docType",value:"invoiceFinal",checked:"invoiceFinal"===n,onChange:w}),(0,t.jsx)("label",{htmlFor:"invoiceFinal",children:"Invoice Final"}),(0,t.jsx)("input",{type:"radio",id:"kwitansiDP",name:"docType",value:"kwitansiDP",checked:"kwitansiDP"===n,onChange:w}),(0,t.jsx)("label",{htmlFor:"kwitansiDP",children:"Kwitansi DP"}),(0,t.jsx)("input",{type:"radio",id:"kwitansiFinal",name:"docType",value:"kwitansiFinal",checked:"kwitansiFinal"===n,onChange:w}),(0,t.jsx)("label",{htmlFor:"kwitansiFinal",children:"Kwitansi Final"})]})]}),(0,t.jsxs)("form",{className:l().form,onSubmit:e=>e.preventDefault(),children:[(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{htmlFor:"clientName",children:"Nama Klien*"}),(0,t.jsx)("input",{type:"text",id:"clientName",placeholder:"Masukkan nama klien",value:s,onChange:e=>u(e.target.value)})]}),(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{htmlFor:"surveyName",children:"Nama Survei*"}),(0,t.jsx)("input",{type:"text",id:"surveyName",placeholder:"Masukkan nama survei",value:d,onChange:e=>c(e.target.value)})]}),(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{htmlFor:"respondentCount",children:"Jumlah Responden*"}),(0,t.jsx)("input",{type:"number",id:"respondentCount",placeholder:"Masukkan jumlah Responden",value:p,onChange:e=>m(e.target.value)})]}),(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{htmlFor:"address",children:"Alamat*"}),(0,t.jsx)("input",{type:"text",id:"address",placeholder:"Masukkan alamat",value:_,onChange:e=>h(e.target.value)})]}),(0,t.jsxs)("div",{className:l().inputRow,children:[(0,t.jsxs)("div",{className:l().nominalContainer,children:[(0,t.jsx)("label",{htmlFor:"amount",children:"Harga Total*"}),(0,t.jsxs)("div",{className:l().nominalInput,children:[(0,t.jsx)("span",{children:"Rp"}),(0,t.jsx)("input",{type:"number",id:"amount",placeholder:"Masukkan nominal harga",value:k,onChange:e=>g(e.target.value)})]})]}),(0,t.jsxs)("div",{className:l().percentageContainer,children:[(0,t.jsx)("label",{htmlFor:"paidPercentage",children:"Persentase Pembayaran*"}),(0,t.jsxs)("div",{className:l().percentageInput,children:[(0,t.jsx)("input",{type:"number",id:"paidPercentage",placeholder:"%",value:x,onChange:e=>v(e.target.value)}),(0,t.jsx)("span",{children:"%"})]})]})]}),(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{htmlFor:"nominalTertulis",children:"Jumlah Pembayaran Tertulis*"}),(0,t.jsx)("input",{type:"text",id:"nominalTertulis",placeholder:"Masukkan nominal tertulis",value:j,onChange:e=>b(e.target.value)})]}),(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{htmlFor:"additionalInfo",children:"Keterangan"}),(0,t.jsx)("textarea",{id:"additionalInfo",placeholder:"Tambah keterangan",value:y,onChange:e=>f(e.target.value)})]}),(0,t.jsxs)("div",{className:l().datePicker,children:[(0,t.jsx)("label",{children:"Tanggal Pembayaran*"}),(0,t.jsx)("input",{type:"date",id:"date",value:C,onChange:e=>N(e.target.value)})]}),(0,t.jsxs)("div",{className:l().buttonGroup,children:[(0,t.jsx)("button",{type:"button",className:l().cancelButton,onClick:()=>{u(""),c(""),m(""),h(""),g(""),v(""),b(""),f(""),N("")},children:"Batal"}),(0,t.jsxs)("button",{type:"button",className:l().exportButton,onClick:e=>i(e),children:[(0,t.jsx)("img",{src:"/images/AddItem.svg",alt:"Export Icon"}),"Export"]})]})]})]}),(0,t.jsx)("div",{className:l().footer,children:"@2024 optimasys | Contact optimasys.work@gmail.com"})]})}},6947:function(e){e.exports={containerbackground:"generator-dokumen_containerbackground__FEzrU",container:"generator-dokumen_container__8j_qO",sidebar:"generator-dokumen_sidebar__u5qSZ",logo:"generator-dokumen_logo__qBrkw",icon:"generator-dokumen_icon___xo4c",nav:"generator-dokumen_nav__EmhF8",active:"generator-dokumen_active__TJZCN",logout:"generator-dokumen_logout__pLyqY",content:"generator-dokumen_content__cI__R",title:"generator-dokumen_title__jKNIU",subtitle:"generator-dokumen_subtitle__l1fPS",label:"generator-dokumen_label__sOjMv",form:"generator-dokumen_form__jya9Y",docType:"generator-dokumen_docType__PDR2H",exportSection:"generator-dokumen_exportSection__Q7w0R",radioGroup:"generator-dokumen_radioGroup__rCw8O",inputGroup:"generator-dokumen_inputGroup__Luvar",inputRow:"generator-dokumen_inputRow__3GpcW",nominalContainer:"generator-dokumen_nominalContainer__mdFn2",percentageContainer:"generator-dokumen_percentageContainer__HEG8s",nominalInput:"generator-dokumen_nominalInput__BhKTj",percentageInput:"generator-dokumen_percentageInput__zEMyN",datePicker:"generator-dokumen_datePicker__WXM_b",buttonGroup:"generator-dokumen_buttonGroup__wHz_0",submitButton:"generator-dokumen_submitButton__kDxe0",cancelButton:"generator-dokumen_cancelButton__MuCvK",exportButton:"generator-dokumen_exportButton__l0xMg",uploadButton:"generator-dokumen_uploadButton__e55iU",uploadConfirmButton:"generator-dokumen_uploadConfirmButton__D166G",image:"generator-dokumen_image__ZlmSn",kontrakImage:"generator-dokumen_kontrakImage__raqbj",footer:"generator-dokumen_footer__cnKQT",uploadContainer:"generator-dokumen_uploadContainer__P9Niw",uploadSubtitle:"generator-dokumen_uploadSubtitle__csQdM",fileInputLabel:"generator-dokumen_fileInputLabel__tCgH7",fileInput:"generator-dokumen_fileInput__KICVO"}}},function(e){e.O(0,[0,2971,2117,1744],function(){return e(e.s=2001)}),_N_E=e.O()}]);