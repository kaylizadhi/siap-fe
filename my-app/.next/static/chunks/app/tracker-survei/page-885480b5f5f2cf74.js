(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{3811:function(e,t,a){Promise.resolve().then(a.bind(a,7429))},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:u,iconNode:d,...h}=e;return(0,r.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:a,strokeWidth:l?24*Number(i)/Number(s):i,className:n("lucide",o),...h},[...d.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let a=(0,r.forwardRef)((a,c)=>{let{className:l,...o}=a;return(0,r.createElement)(i,{ref:c,iconNode:t,className:n("lucide-".concat(s(e)),l),...o})});return a.displayName="".concat(e),a}},2208:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},7429:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7437),s=a(7722),n=a.n(s),c=a(2265);let i=(0,a(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var l=a(3247),o=a(2208),u=a(9376),d=()=>{let[e,t]=(0,c.useState)([]),[a,s]=(0,c.useState)(!0),[d,h]=(0,c.useState)(null),[m,x]=(0,c.useState)(""),[p,f]=(0,c.useState)(1),[g,y]=(0,c.useState)(1),[v,j]=(0,c.useState)(0),[N]=(0,c.useState)(10),b=(0,u.useRouter)(),k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=localStorage.getItem("authToken");s(!0);try{let s="".concat("https://siap-be-production.up.railway.app/api/","survei-status/?page=").concat(e,"&page_size=").concat(N);a&&(s+="&search=".concat(encodeURIComponent(a)));let n=await fetch(s,{headers:{Authorization:r?"Token ".concat(r):"","Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let c=await n.json();t(c.results||[]),y(c.total_pages),f(c.current_page),j(c.count)}catch(e){console.error("Error fetching surveys:",e),h(e.message)}finally{s(!1)}};(0,c.useEffect)(()=>{k()},[]);let w=e=>{e>=1&&e<=g&&(f(e),k(e,m))};return((0,c.useEffect)(()=>{let e=setTimeout(()=>{f(1),k(1,m)},300);return()=>clearTimeout(e)},[m]),a&&!e.length)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(i,{className:"h-8 w-8 animate-spin text-gray-500"})}):d?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-8 text-red-500",children:["Error: ",d]})}):(0,r.jsxs)("div",{className:"".concat(n().className," p-6"),children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-[#B31312]",children:"Daftar Survei"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-2",children:["Total ",v," survei ",m&&"ditemukan"]})]})}),(0,r.jsxs)("div",{className:"relative w-full mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none",children:(0,r.jsx)(l.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Cari berdasarkan nama survei atau nama perusahaan...",className:"w-full pl-14 pr-6 py-3 rounded-full border-2 border-gray-200 outline-none bg-transparent text-gray-600 text-sm ".concat(n().className," focus:border-[#B31312] transition-colors"),value:m,onChange:e=>x(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-8 py-3 text-xs text-gray-500 uppercase font-medium bg-gray-50 rounded-t-lg",children:[(0,r.jsx)("div",{children:"Nama Survei"}),(0,r.jsx)("div",{children:"Nama Perusahaan"}),(0,r.jsx)("div",{children:"Action"})]}),(0,r.jsx)("div",{className:"space-y-3",children:0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:m?"Tidak ada survei yang ditemukan":"Belum ada survei yang ditambahkan"}):e.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-8 py-3 bg-white rounded-lg border border-gray-200 hover:border-gray-300 hover:shadow-sm transition-all duration-200",children:[(0,r.jsx)("div",{className:"font-bold text-gray-700",children:e.nama_survei}),(0,r.jsx)("div",{className:"text-gray-500",children:e.nama_klien}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>b.push("/tracker-survei/".concat(e.id)),className:"p-2 text-gray-800 hover:bg-gray-100 rounded-full transition-colors",title:"View Details",children:(0,r.jsx)(o.Z,{size:18})})})]},e.id))}),g>1&&(0,r.jsxs)("div",{className:"mt-6 flex justify-end items-center space-x-8 px-8",children:[(0,r.jsxs)("button",{onClick:()=>w(p-1),disabled:1===p,className:"flex items-center space-x-1 ".concat(1===p?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:text-gray-500"),children:[(0,r.jsx)("span",{children:"<"}),(0,r.jsx)("span",{children:"Sebelumnya"})]}),(0,r.jsxs)("button",{onClick:()=>w(p+1),disabled:p===g,className:"flex items-center space-x-1 ".concat(p===g?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:text-gray-500"),children:[(0,r.jsx)("span",{children:"Selanjutnya"}),(0,r.jsx)("span",{children:">"})]})]})]})}},7722:function(e){e.exports={style:{fontFamily:"'__Caudex_ebaa45', '__Caudex_Fallback_ebaa45'",fontWeight:700,fontStyle:"normal"},className:"__className_ebaa45"}}},function(e){e.O(0,[2453,2971,2117,1744],function(){return e(e.s=3811)}),_N_E=e.O()}]);