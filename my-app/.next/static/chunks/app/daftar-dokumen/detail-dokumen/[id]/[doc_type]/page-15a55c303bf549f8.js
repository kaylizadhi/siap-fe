(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2523],{1018:function(e,a,t){Promise.resolve().then(t.bind(t,7939))},7939:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(7437),n=t(6013),l=t.n(n),c=t(2265),i=t(9376),r=t(7409);t(2648);var o=t(4663);function m(e){let{params:a}=e,{id:t,doc_type:n}=a,[m,d]=(0,c.useState)(null),[x,u]=(0,c.useState)(!1),p=(0,i.useRouter)();(0,c.useEffect)(()=>{t&&fetch("".concat("https://siap-be-production.up.railway.app/api/","daftarDokumen/detailDokumen/").concat(t,"/")).then(e=>e.json()).then(e=>d(e)).catch(e=>console.error("Error:",e))},[t]);let N=async()=>{console.log("Export button clicked for ");let{url:e,fileNameFallback:a,data:t}={invoiceDP:{url:"".concat("https://siap-be-production.up.railway.app/api/","/dokumen_pendukung/export_existing_invoice_dp/"),fileNameFallback:"invoiceDP_".concat(m.survey_name,".xlsx"),data:{client_name:m.client_name,survey_name:m.survey_name,respondent_count:m.respondent_count,address:m.address,amount:parseFloat(m.amount).toString(),paid_percentage:parseFloat(m.paid_percentage).toString(),nominal_tertulis:m.nominal_tertulis,additional_info:m.additional_info,date:m.date}},invoiceFinal:{url:"".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/export_existing_invoice_final/"),fileNameFallback:"invoiceFinal_".concat(m.survey_name,".xlsx"),data:{client_name:m.client_name,survey_name:m.survey_name,respondent_count:m.respondent_count,address:m.address,amount:parseFloat(m.amount).toString(),paid_percentage:parseFloat(m.paid_percentage).toString(),nominal_tertulis:m.nominal_tertulis,additional_info:m.additional_info,date:m.date}},kwitansiDP:{url:"".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/export_existing_kwitansi_dp/"),fileNameFallback:"kwitansiDP_".concat(m.survey_name,".xlsx"),data:{client_name:m.client_name,survey_name:m.survey_name,amount:parseFloat(m.amount).toString(),nominal_tertulis:m.nominal_tertulis,additional_info:m.additional_info,date:m.date}},kwitansiFinal:{url:"".concat("https://siap-be-production.up.railway.app/api/","dokumen_pendukung/export_existing_kwitansi_final/"),fileNameFallback:"kwitansiFinal_".concat(m.survey_name,".xlsx"),data:{client_name:m.client_name,survey_name:m.survey_name,amount:parseFloat(m.amount).toString(),nominal_tertulis:m.nominal_tertulis,additional_info:m.additional_info,date:m.date}}}[m.doc_type];if(!e||!t){console.error("Invalid document type specified");return}try{var s;let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("Failed to export document");let l=await n.blob(),c=window.URL.createObjectURL(l),i=document.createElement("a");i.href=c;let r=(null===(s=n.headers.get("Content-Disposition"))||void 0===s?void 0:s.split("filename=")[1])||a;i.download=r.replace(/"/g,""),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(c)}catch(e){console.error("Error exporting document:",e)}},h=async e=>{let a=encodeURIComponent(e);try{(await fetch("".concat("https://siap-be-production.up.railway.app/api/","daftarDokumen/").concat(a,"/delete/"),{method:"DELETE"})).ok?(r.Am.success("Dokumen berhasil dihapus!"),setTimeout(()=>{p.push("/daftar-dokumen")},500)):r.Am.error("Gagal menghapus dokumen.")}catch(e){console.error("Error:",e),r.Am.error("Terjadi kesalahan saat menghapus dokumen.")}};return m?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-6 text-primary-900 ".concat(l().className),children:"Detail Dokumen"}),(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-lg",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Kode Dokumen:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.id})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Jenis Dokumen:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.doc_type})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Judul:"}),(0,s.jsx)("p",{className:"mt-1 text-lg font-bold text-gray-800 ".concat(l().className),children:m.survey_name})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Nama Klien:"}),(0,s.jsx)("p",{className:"mt-1 text-lg font-semibold text-gray-800 ".concat(l().className),children:m.client_name})]}),["invoiceDP","invoiceFinal"].includes(n)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Alamat:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.address||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Jumlah Responden:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.respondent_count||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Harga Total:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:new Intl.NumberFormat("id-ID").format(m.amount)||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Persentase Dibayar:"}),(0,s.jsxs)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:[m.paid_percentage||"N/A","%"]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Jumlah Dibayarkan:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:new Intl.NumberFormat("id-ID").format(m.amount*m.paid_percentage/100)||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Jumlah Dibayarkan Tertulis:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.nominal_tertulis||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Tenggat Pembayaran:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.date||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Keterangan Tambahan:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.additional_info||"N/A"})]})]}):["kwitansiDP","kwitansiFinal"].includes(n)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Jumlah Dibayarkan:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:new Intl.NumberFormat("id-ID").format(m.amount)||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Jumlah Dibayarkan Tertulis:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.nominal_tertulis||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Tenggat Pembayaran:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.date||"N/A"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700 ".concat(l().className),children:"Keterangan Tambahan:"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-gray-800 ".concat(l().className),children:m.additional_info||"N/A"})]})]}):null," ",(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(o.Z,{variant:"primary",onClick:()=>p.push("/daftar-dokumen"),className:"flex items-center px-6 py-3",children:(0,s.jsx)("span",{className:"text-sm ".concat(l().className),children:"Kembali"})}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsx)(o.Z,{variant:"primary",onClick:e=>N(e),className:"flex items-center px-6 py-3",children:(0,s.jsx)("span",{className:"text-sm ".concat(l().className),children:"Export"})})}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsx)(o.Z,{variant:"secondary",onClick:()=>u(!0),className:"px-3 py-2",children:(0,s.jsx)("span",{className:"".concat(l().className),children:"Delete"})})})]})]}),x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-lg max-w-sm w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Konfirmasi Hapus"}),(0,s.jsxs)("p",{className:"mb-6 text-gray-600",children:['Apakah Anda yakin ingin menghapus dokumen "',m.doc_type," ",m.survey_name,'"? Tindakan ini tidak dapat dibatalkan.']}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(o.Z,{onClick:()=>u(!1),variant:"modalCancel",children:"Batal"}),(0,s.jsx)(o.Z,{onClick:()=>{h(m.id),u(!1)},variant:"modalDelete",children:"Hapus"})]})]})})]}):(0,s.jsx)("div",{className:"text-center",children:"Loading..."})}},4663:function(e,a,t){"use strict";var s=t(7437);t(2265),a.Z=e=>{let{onClick:a,children:t,type:n="button",variant:l="default",className:c="",...i}=e;return(0,s.jsx)("button",{onClick:a,type:n,className:"".concat("px-4 py-2 rounded-full transition-colors"," ").concat({default:"bg-gray-200 text-black hover:bg-gray-300",primary:"bg-[#a62626] text-white hover:bg-[#a62828]",secondary:"bg-white border border-[#a62626] text-[#a62626] hover:bg-[#f2f2f2]",modalCancel:"px-6 py-2 text-gray-600 hover:text-gray-800 rounded-full border border-gray-300 hover:border-gray-400 transition-colors",modalDelete:"px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors"}[l]," ").concat(c),...i,children:t})}},2648:function(){},6013:function(e){e.exports={style:{fontFamily:"'__Caudex_ebaa45', '__Caudex_Fallback_ebaa45'",fontWeight:700,fontStyle:"normal"},className:"__className_ebaa45"}}},function(e){e.O(0,[5676,7966,8304,2971,2117,1744],function(){return e(e.s=1018)}),_N_E=e.O()}]);